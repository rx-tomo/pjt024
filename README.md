# 仕事のストレス判定図（デモ分析）

https://rx-tomo.github.io/pjt024/stress-hantei/


ブラウザ単体（HTML/CSS/JS）で動く、デモ用の集団分析アプリです。

## できること

- デモデータ（5パターン）を選択して分析
- 簡易版12項目（q1..q12）→ 4尺度（量的負担/コントロール/上司支援/同僚支援）を計算
- 係数（Technoteの簡易版）に基づいて健康リスクを算出し、判定図（2図）と総合健康リスクを表示
- 切り口（集計単位）とフィルタで比較、簡易シミュレーションで深掘り

## 出典・参考

本プロジェクトは、下記公開資料の説明（式・係数・読み方）に基づくデモ実装です。
参照先はフレーム構成・利用条件等の文脈が分かるよう、個別ページ直リンクではなく「入口（トップ）」を基本とします。

- 東京大学 医学部精神医学教室「仕事のストレス判定図」（入口）: https://mental.m.u-tokyo.ac.jp/old/hanteizu/
  - 上記配下に、テクニカルノート・質問票・結果の読み方・使用条件（利用条件）等のページがあります。
- 関連（係数や平均値の更新に関する情報が参照されることがあるサイト）: https://www.tmu-ph.ac/



## 実装しているロジック（概要）

- スコア（簡易版12項目）
  - 量的負担 = q1 + q2 + q3
  - コントロール = q4 + q5 + q6
  - 上司の支援 = q7 + q9 + q11
  - 同僚の支援 = q8 + q10 + q12
- 健康リスク（テクニカルノートの式）
  - 図1（量的負担×コントロール）: `100 * exp((x - A) * α + (y - B) * β)`
  - 図2（上司支援×同僚支援）: `100 * exp((x - C) * γ + (y - D) * δ)`
  - 総合健康リスク（読み方の説明）: `risk1 * risk2 / 100`
- 係数・全国平均の扱い
  - `legacy` をデフォルト（Technote掲載値）
  - `updated` は Technote に併記されている訂正値（または更新値）を使う切替
  - 性別の係数が異なるため、UIはデフォルトで「男女別に集計・表示」します

## 免責

- 本アプリはデモ用であり、医療判断・診断のためのツールではありません。
- デモデータはダミーです（実データは含みません）。

## 起動

`index.html` は ES Modules を使うため、ローカルHTTPサーバで開くことを推奨します。

- macOS: `start.command` をダブルクリック（必要なら「開く」を許可）
  - `/` を開く（ルートの `index.html` が `docs/stress-hantei/` にリダイレクトします）
- もしくは `local-start.command`（直接 `docs/stress-hantei/` を開く）
- それ以外: 任意の静的サーバでこのフォルダを配信して `index.html` を開いてください

## GitHub Pages（ホスト）

GitHub Pages は HTTPS で配信されるため、`file://` の制限（ES Modules/ローカルファイル制約）を回避して安定して動かせます。

- アプリ本体: `docs/stress-hantei/index.html`
- 予定URL（プロジェクトPages）: `https://rx-tomo.github.io/pjt024/stress-hantei/`
- ミニテスト: `https://rx-tomo.github.io/pjt024/stress-hantei/tests.html`

## CSV形式（読み込み）

必須列:

- `id`, `group`, `sex`, `q1`〜`q12`

任意列:

- `site`, `role`, `shift`, `ageBand`, `phase`

`sex` は `male/female` または `M/F`、`男性/女性` を受け付けます。

※フィルターの選択肢（部署/職種/拠点/勤務形態/年代/phase 等）は、あらかじめ固定のリストを持つのではなく、読み込んだデータ内に実際に出現している値から動的に生成します。
